{% extends "base.html" %}
{% block content %}
<section class="hero"><h1>Set Your Security Questions</h1>
  <p>Choose three questions and answers. This helps you recover access if you forget your password.</p>
</section>

<div class="container" style="max-width:560px;margin:auto;text-align:left;">
  {% if error %}<p style="color:#ff8080;">{{ error }}</p>{% endif %}
  <form method="POST">

    <label>Question 1
      <select class="input" name="sq1_sel" id="sq1_sel" required>
        {% for q in SECURITY_QUESTIONS %}
          <option value="{{ q }}">{{ q }}</option>
        {% endfor %}
      </select>
    </label>
    <div id="sq1_custom_wrap" style="display:none;margin-top:6px;">
      <input class="input" name="sq1" placeholder="Enter your custom question">
    </div>
    <label>Answer 1
      <input class="input" type="password" name="sa1" required>
    </label>
    <br><br>

    <label>Question 2
      <select class="input" name="sq2_sel" id="sq2_sel" required>
        {% for q in SECURITY_QUESTIONS %}
          <option value="{{ q }}">{{ q }}</option>
        {% endfor %}
      </select>
    </label>
    <div id="sq2_custom_wrap" style="display:none;margin-top:6px;">
      <input class="input" name="sq2" placeholder="Enter your custom question">
    </div>
    <label>Answer 2
      <input class="input" type="password" name="sa2" required>
    </label>
    <br><br>

    <label>Question 3
      <select class="input" name="sq3_sel" id="sq3_sel" required>
        {% for q in SECURITY_QUESTIONS %}
          <option value="{{ q }}">{{ q }}</option>
        {% endfor %}
      </select>
    </label>
    <div id="sq3_custom_wrap" style="display:none;margin-top:6px;">
      <input class="input" name="sq3" placeholder="Enter your custom question">
    </div>
    <label>Answer 3
      <input class="input" type="password" name="sa3" required>
    </label>

    <div style="margin-top:16px;">
      <button class="btn" type="submit">Save Questions</button>
    </div>
  </form>
</div>

<script>
(function(){
  function hook(selId, wrapId) {
    const sel = document.getElementById(selId);
    const wrap = document.getElementById(wrapId);
    function update(){ wrap.style.display = (sel.value === "Customâ€¦") ? "block" : "none"; }
    sel.addEventListener("change", update);
    update();
  }
  hook("sq1_sel","sq1_custom_wrap");
  hook("sq2_sel","sq2_custom_wrap");
  hook("sq3_sel","sq3_custom_wrap");
})();
</script>
{% endblock %}
